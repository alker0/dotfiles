alias ds='du -sh'

[ -n "$(command -v powershell)" ] && {
  powershell_command='powershell -Command'
  alias psx=$powershell_command
  alias poff="$powershell_command Stop-Computer"
  alias rbt="$powershell_command Restart-Computer"
  unset powershell_command
}

[ -n "$(command -v docker)" ] && {
  alias dkr='docker'
  alias dkli='docker image ls'
  alias dklc='docker container ls'
  alias dki='docker image'
  alias dkc='docker container'
}

fenv_excludes_path=~/.config/fenv/fenv-excludes

[ -r "$fenv_excludes_path" ] && {
  fenv_excludes=$(cat < $fenv_excludes_path | tr -s '\n' | tr '\n' '|')

  fenv_sed_pattern=$(cat <<EOP | tr -d '\n'
  /[:]{2}|[CD]:[\\]|[CD]:$/b;
  s/=([^:]+):/=*\n--------\1\n--------/;
  s/:/\n--------/g
EOP
  )

  alias fenv="env | grep -E -v '^(${fenv_excludes})=' | sort | sed -r '${fenv_sed_pattern}'"
}
unset fenv_excludes_path fenv_excludes fenv_sed_pattern

unqh () {
  # inspect -> type unqh
  # delete -> unset -f unqh
  # list -> set | less
  reverse_command () {
    nl -n rz | sort -nr | cut -f 2-
  } &&
  history -a &&
  cat $HISTFILE |
  reverse_command |
  awk '!x[$0]++' |
  reverse_command > /tmp/history &&
  cat /tmp/history > $HISTFILE &&
  history -c &&
  history -r
}

[ -n "$(command -v chezmoi)" ] && {
  alias cz='chezmoi'
  alias czad='chezmoi add'
  alias czadt='chezmoi add --template'
  alias czadat='chezmoi add --autotemplate'
  alias czap='chezmoi apply'
  alias czdf='chezmoi diff'
  alias czdt='chezmoi data'
  alias cze='chezmoi edit'
  alias czec='chezmoi edit-config'
  alias czext='chezmoi execute-template'
  alias czfg='chezmoi forget'
  alias czm='chezmoi managed'
  alias czunm='chezmoi unmanaged'
  alias czsp='chezmoi source-path'
  alias czupd='chezmoi update'
  alias czupg='chezmoi upgrade'
  alias czcd='cd `chezmoi source-path`'
}

